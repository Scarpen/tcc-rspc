<h2>Sign up</h2>

<%= simple_form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :email, required: true, autofocus: true %>
    <%= f.input :password, required: true, hint: ("#{@minimum_password_length} characters minimum" if @validatable) %>
    <%= f.input :password_confirmation, required: true  %>
    <%= f.input :gender %>
    <%= f.input :avatar %>
    <%= f.input :phone %>
    <%= f.input :date_birthday %>
    <%= f.input :zipcode, :input_html => {
        :id => "zipcode_input",
        :onblur => "search(this)"
      } %>
    <div id="address_inputs" style="visibility: hidden">
    <%= f.input :address, :input_html => {
        :id => "address"
      } %>
    <%= f.input :neighborhood, :input_html => {
        :id => "neighborhood",
      } %>
    <%= f.input :city, :input_html => {
        :id => "city",
      } %>
    <%= f.input :state, :input_html => {
        :id => "state",
      } %>
    <%= f.input :complement %>
  </div>
  </div>




  <div class="actions">
    <%= f.submit "Sign up" %>
  </div>
<% end %>


<script>

function search(elem) {
	$.getJSON("http://localhost:3000/cep/" + elem.value + ".json", function(data){ //pegando dados via JSON
		
		$('#address').val(data.address.address);
		$('#neighborhood').val(data.address.neighborhood);
		$('#city').val(data.address.city);
		$('#state').val(data.address.state);
		document.getElementById("address_inputs").style.visibility = "visible"


});
}
</script>